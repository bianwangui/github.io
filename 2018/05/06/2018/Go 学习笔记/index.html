<!DOCTYPE html>
<html lang=zh>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Go 入门">
<meta name="keywords" content="Go">
<meta property="og:type" content="article">
<meta property="og:title" content="Golang 学习笔记">
<meta property="og:url" content="https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/index.html">
<meta property="og:site_name" content="万少侠写字的地方">
<meta property="og:description" content="Go 入门">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/%E5%86%85%E5%AD%98.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/%E5%86%85%E5%AD%982.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/%E5%86%85%E5%AD%983.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/%E5%86%85%E5%AD%984.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/1.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/1.2.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/2.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/3.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/11.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/12.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/13.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/14.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/15.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/16.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/17.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/18.png">
<meta property="og:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/goto.png">
<meta property="og:updated_time" content="2020-09-26T01:52:56.573Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Golang 学习笔记">
<meta name="twitter:description" content="Go 入门">
<meta name="twitter:image" content="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Golang 学习笔记</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/">Etiqueta</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2018/06/06/2018/人生的维度/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2018/05/06/2018/不会自动化的代码不是好程序员/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&text=Golang 学习笔记"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&title=Golang 学习笔记"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&is_video=false&description=Golang 学习笔记"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Golang 学习笔记&body=Check out this article: https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&title=Golang 学习笔记"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&title=Golang 学习笔记"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&title=Golang 学习笔记"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&title=Golang 学习笔记"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&name=Golang 学习笔记&description=&lt;blockquote&gt;
&lt;p&gt;Go 入门&lt;br&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&t=Golang 学习笔记"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#概述"><span class="toc-number">1.</span> <span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#语言特性"><span class="toc-number">1.1.</span> <span class="toc-text">语言特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#环境变量"><span class="toc-number">1.2.</span> <span class="toc-text">环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#源码文件"><span class="toc-number">1.3.</span> <span class="toc-text">源码文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码包"><span class="toc-number">1.4.</span> <span class="toc-text">代码包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#依赖包管理"><span class="toc-number">1.5.</span> <span class="toc-text">依赖包管理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#程序结构要素"><span class="toc-number">2.</span> <span class="toc-text">程序结构要素</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#变量"><span class="toc-number">2.1.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常量"><span class="toc-number">2.2.</span> <span class="toc-text">常量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#作用域"><span class="toc-number">2.3.</span> <span class="toc-text">作用域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据类型"><span class="toc-number">2.4.</span> <span class="toc-text">数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#字符串"><span class="toc-number">2.4.1.</span> <span class="toc-text">字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数组"><span class="toc-number">2.4.2.</span> <span class="toc-text">数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Slice"><span class="toc-number">2.4.3.</span> <span class="toc-text">Slice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Map"><span class="toc-number">2.4.4.</span> <span class="toc-text">Map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Strcut"><span class="toc-number">2.4.5.</span> <span class="toc-text">Strcut</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#指针"><span class="toc-number">2.4.6.</span> <span class="toc-text">指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#算术运算符："><span class="toc-number">2.4.7.</span> <span class="toc-text">算术运算符：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#控制语句"><span class="toc-number">2.4.8.</span> <span class="toc-text">控制语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数"><span class="toc-number">2.4.9.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#错误处理"><span class="toc-number">2.4.10.</span> <span class="toc-text">错误处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#接口"><span class="toc-number">2.4.11.</span> <span class="toc-text">接口</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Golang 学习笔记
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <span itemprop="name">万少侠写字的地方</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2018-05-05T16:00:00.000Z" itemprop="datePublished">2018-05-06</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Language/">Language</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Go/">Go</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <blockquote>
<p>Go 入门<br><a id="more"></a></p>
</blockquote>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><h2 id="语言特性"><a href="#语言特性" class="headerlink" title="语言特性"></a>语言特性</h2><ol>
<li>Go中有指针，但没有指针运算。   </li>
<li>静态类型：使用变量时，需要明确声明的每一个变量的类型。   </li>
<li>导入却未使用的包编译器会报错, 声明却未使用的变量编译器会报错。   </li>
<li>大写开头的标识符是公共的(外部调用), 小写开头的标识符是私有的(不可调用)。  </li>
</ol>
<h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><p><strong>GOROOT</strong><br>GOROOT 在GO语言中表示的是编译工具、标准库等的安装路径。在Linux系统中一般安装在 <code>/usr/go</code>或<code>/usr/local/go</code> ，这样Linux系统中的PATH变量一般都包含了这两个目录，所以就可以直接运行go命令，而 Windows系统中一般默认安装在 <code>C:\go</code> 中。</p>
<p><strong>GOPATH</strong><br>GOPATH 环境变量则表示go的工作目录。也可以理解为GO源码目录，go代码在这个目录下进行编译、链接最后生成所需要的库和可执行文件。GoPath值中包含多个工作区路径时，必须设置GOBIN，否则无法成功安装Go程序的可执行文件。</p>
<h2 id="源码文件"><a href="#源码文件" class="headerlink" title="源码文件"></a>源码文件</h2><p><strong>命令源码文件</strong>和 <strong>库源码文件</strong>指go语言程序。命令源码文件是声明自己属于main代码包，包含无参数声明和结果声明的main函数。命令源码文件是go程序的入口，但不建议把程序都写在一个文件中。<em>同一个代码包中强烈不建议直接包含多个命令源码文件</em>。</p>
<p><strong>测试源码文件</strong>是用来测试上面两种文件的，是辅助的源码文件。名称以    <code>_test.go</code>为后缀，其中至少有一个函数名称以 <code>Test</code>为前缀或者 <code>Benchmark</code>为前缀，并且该函数接受一个类型为 <code>*Testing.T</code>或者 <code>*Testing.B</code>的参数。</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 功能测试函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFind</span><span class="params">(t*Testing.T)</span></span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// 性能测试函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkFind</span><span class="params">(b*Testing.B)</span></span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="代码包"><a href="#代码包" class="headerlink" title="代码包"></a>代码包</h2><p>代码包是编译和归档Go程序的基本单位，可以将若干go程序源码文件放到一个代码包中，对代码包进行编译或归档。<strong>每个源文件必须声明其所属的代码包，同一代码包中所有源文件声明的代码包是一致的</strong>。代码包声明语句中的包名应该是该代码的导入路径的最右子路径。</p>
<p><strong>代码包初始化</strong>函数即无参数声明和结果声明的<code>init函数</code>，<code>init函数</code>可以被声明在任何文件中，且可以有多个。如果导入的包依赖其它包，会先导入其它包，然后初始化其它包中的常量和变量，最后如果其它包中有<code>init函数</code>，会自动执行<code>init函数</code>。所有包导入完成后才会对main中常量和变量进行初始化，然后执行main中的<code>init函数</code>，最后执行<code>main函数</code>。<code>init函数</code>总是在<code>main函数</code>前执行，并且每个<code>init函数</code>只会被执行一次。</p>
<p><strong>代码导入</strong>时还可以将导入的包命名为另一个容易记忆的别名。<code>点（.）</code>操作的含义是点标识的包导入后，调用该包中函数时可以省略前缀包名。<code>下划线（_）</code>操作的含义是导入该包但不导入整个包，而是执行该包中的<code>init函数</code>，因此无法通过包名来调用包中的其他函数。使用<code>下划线（_）</code>操作往往是为了注册包里的引擎，让外部可以方便使用。</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 入口包：可执行程序</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">​</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// go中除了声明语句,其他语句都要写在函数体内??</span></span><br></pre></td></tr></table></figure>
<p><a href="https://thenewstack.io/understanding-golang-packages/" target="_blank" rel="noopener">package main</a><br>The <a href="https://studygolang.com/articles/5831" target="_blank" rel="noopener">package “main”</a>tells the Go compiler that the package should compile as an executable program instead of a shared library.</p>
<h2 id="依赖包管理"><a href="#依赖包管理" class="headerlink" title="依赖包管理"></a>依赖包管理</h2><p>Golang第三方库资源在墙内访问得拼运气</p>
<ol>
<li>可以通过 <a href="https://www.golangtc.com/download/package" target="_blank" rel="noopener">第三方包文件下载</a></li>
<li>压缩包直接解压到 %GOPATH%\src 目录,在该目录下执行 go install packname</li>
<li>安装好会在 %GOPATH%\bin 目录下生成 .exe 文件 4. 出现依赖异常时, 直接下载依赖文件并解压到文件夹即可</li>
</ol>
<h1 id="程序结构要素"><a href="#程序结构要素" class="headerlink" title="程序结构要素"></a>程序结构要素</h1><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p><strong>变量的声明和赋值</strong><br>变量的声明语句可以位于函数体外，但变量的赋值语句不可以位于函数体外；特殊变量<code>_</code>类似于回收站，表示在下文中不需要该值；简短变量声明语句只有对已经在同级词法域声明过的变量才和赋值操作语句等价，如果变量是在外部词法域声明的，那么简短变量声明语句将会在当前词法域重新声明一个新的变量；不管是隐式还是显式地赋值，在赋值语句左边的变量和右边最终的求到的值必须有相同的数据类型。</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i, j <span class="keyword">int</span></span><br><span class="line"><span class="comment">//var语句定义了变量的列表,和函数的参数列表一样，类型在后面。</span></span><br><span class="line"><span class="comment">/*零值</span></span><br><span class="line"><span class="comment">变量在定义时没有明确的初始化时会赋值为_零值_。(由Printf输出)</span></span><br><span class="line"><span class="comment">零值是：</span></span><br><span class="line"><span class="comment">数值类型为 `0`，</span></span><br><span class="line"><span class="comment">布尔类型为 `false`，</span></span><br><span class="line"><span class="comment">字符串为 `""`（空字符串）。*/</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">var</span> i, j <span class="keyword">int</span> = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">var</span> i, j = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"><span class="comment">//如果初始化是使用表达式，则可以省略类型；变量从初始值中获得类型。</span></span><br><span class="line">​</span><br><span class="line">k := <span class="number">100</span> </span><br><span class="line"><span class="comment">// := 简洁赋值语句在明确类型的地方，可以用于替代 var。函数外的每个语句都必须以关键字开始（`var`、`func`），`:=` 结构不能使用在函数外。</span></span><br><span class="line">​</span><br><span class="line">_, varName2 := val1, val2  <span class="comment">//丢弃 val1 , varName2 = val2</span></span><br><span class="line"><span class="comment">//_(下划线)是一个特殊的变量，赋给它的值会被丢弃</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    varName1 <span class="keyword">type</span></span><br><span class="line">    varName2 <span class="keyword">type</span></span><br><span class="line">) <span class="comment">//定义两个变量</span></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    varName1 = val1</span><br><span class="line">    varName2 = val2</span><br><span class="line">) <span class="comment">// 定义两个变量并赋值</span></span><br><span class="line"><span class="comment">// 变量不可以重复声明</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">100</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">200</span> <span class="comment">// error</span></span><br><span class="line"><span class="comment">// 变量,常量与长整型问题</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    )</span><br><span class="line">​</span><br><span class="line"><span class="keyword">const</span> Big   = <span class="number">1</span> &lt;&lt; <span class="number">100</span></span><br><span class="line"><span class="keyword">var</span> Bigg = <span class="number">1</span> &lt;&lt; <span class="number">100</span>  <span class="comment">// constant 1267650600228229401496703205376 overflows int</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"no error"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">var</span> p = f()</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span> *<span class="title">int</span></span> &#123;</span><br><span class="line">    v := <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> &amp;v</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(p)  <span class="comment">// 第一次执行返回一个地址,第二次开始返回一个相同的地址??</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>变量的类型转换</strong><br>Go中不存在隐式转换，类型转换必须是显性的，<em>类型转换只能发生在两种兼容类型之间</em>。<br>类型转换格式：&lt;变量名称&gt;  [:] = &lt;目标类型&gt;（&lt;需转换的变量&gt;）<br><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取变量类型</span></span><br><span class="line">fmt.Println(reflect.TypeOf(<span class="keyword">var</span>))</span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, <span class="keyword">var</span>)</span><br><span class="line"><span class="comment">// 关于函数,变量,变量声明,return语句的代码示例</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    a := x + <span class="number">100</span></span><br><span class="line">    b := y + <span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span> a, b</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(add(<span class="number">100</span>, <span class="number">200</span>))</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="params">(a <span class="keyword">int</span>, b <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    a = x + <span class="number">100</span></span><br><span class="line">    b = y + <span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span> a, b</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(add(<span class="number">100</span>, <span class="number">200</span>))</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="params">(a <span class="keyword">int</span>, b <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    a = x + <span class="number">100</span></span><br><span class="line">    b = y + <span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(add(<span class="number">100</span>, <span class="number">200</span>))</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">//error: not enough arguments to return</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    a := x + <span class="number">100</span></span><br><span class="line">    b := y + <span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(add(<span class="number">100</span>, <span class="number">200</span>))</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">//error: add(100, 200) used as value</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    a := x + <span class="number">100</span></span><br><span class="line">    b := y + <span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(add(<span class="number">100</span>, <span class="number">200</span>))</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">//error: too many arguments to return</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span> <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    a := x + <span class="number">100</span></span><br><span class="line">    b := y + <span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span> a, b</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(add(<span class="number">100</span>, <span class="number">200</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//return 0</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span> <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    x = x + <span class="number">100</span></span><br><span class="line">    y = y + <span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(add(<span class="number">100</span>, <span class="number">200</span>))</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">//too many arguments to return</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span> <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    x = x + <span class="number">100</span></span><br><span class="line">    y = y + <span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span> x, y</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(add(<span class="number">100</span>, <span class="number">200</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//error: int is not a type; too many arguments to return</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span> <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a,b <span class="keyword">int</span></span><br><span class="line">    a = x + <span class="number">100</span></span><br><span class="line">    b = y + <span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span> a,b</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(add(<span class="number">100</span>, <span class="number">200</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>变量零值</strong></p>
<ol>
<li>数值类型变量对应的零值是0</li>
<li>布尔类型变量对应的零值是false</li>
<li>字符串类型对应的零值是 “ ”</li>
<li>数组或结构体等聚合类型对应的零值是每个元素或字段都是对应该类型的零值</li>
<li>接口或引用类型（包括slice、指针、map、chan和函数）变量对应的零值是 nil</li>
</ol>
<p><strong>常用的布尔值变量名称</strong><br>done，found，ok，success，flag 等</p>
<h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><p><strong>常量定义从形式上可分为显式和隐式</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//显示类型 </span></span><br><span class="line"> <span class="keyword">const</span> b <span class="keyword">string</span> = <span class="string">"abc"</span></span><br><span class="line"> <span class="comment">//隐式类型 </span></span><br><span class="line"> <span class="keyword">const</span> b = <span class="string">"abc"</span>  (也叫无类型常量)</span><br><span class="line"><span class="comment">//多个相同类型的声明可以简写为：</span></span><br><span class="line"><span class="keyword">const</span> name1 , name2  = value1 , value2</span><br><span class="line"><span class="comment">// 与var num = 3 不同的是常量一旦定义, 就不能更改</span></span><br><span class="line"><span class="comment">// 格式中 val 可以是表达式，但不能为运行时才能知道结果的表达式</span></span><br></pre></td></tr></table></figure></p>
<p>常量范围目前只支持布尔型，数字型和字符串型。</p>
<p><strong>特殊常量iota</strong><br>iota在const关键字出现时将被重置为0。const中每新增一行常量声明将使itoa计数一次。<br>itoa常见使用：</p>
<ol>
<li>跳值使用法 通过“ _ ” 实现</li>
<li>插队使用法  </li>
<li>表达式隐式使用法</li>
<li>单行使用法</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//iota，特殊常量，可以认为是一个可以被编译器修改的常量。在每一个const关键字出现时，被重置为0，然后再下一个const出现之前，每出现一次iota，其所代表的数字会自动增加1。</span></span><br><span class="line"><span class="comment">//iota 可以被用作枚举值：</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="literal">iota</span>  <span class="comment">// 0</span></span><br><span class="line">    b = <span class="number">3.14</span></span><br><span class="line">    c = <span class="literal">iota</span>  <span class="comment">// 2</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a, b = itoa, itoa+<span class="number">3</span>  <span class="comment">// 单行值一致</span></span><br><span class="line">    c,d </span><br><span class="line">    f = itoa  <span class="comment">// 这里一定要赋值，否则会默认沿用前面的表达式，导致出错</span></span><br><span class="line">)</span><br><span class="line">​</span><br><span class="line"><span class="comment">//简写如下: （简写的时候要谨慎）</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="literal">iota</span>*<span class="number">2</span>  <span class="comment">//0</span></span><br><span class="line">    b   <span class="comment">// 2</span></span><br><span class="line">    c  <span class="comment">// 4</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">//使用 := 语法只能定义变量,无法定义常量</span></span><br></pre></td></tr></table></figure>
<h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><p>函数的形参和有名返回值作为函数最外层局部变量存储在相同的词法块中。Go中的函数作用域和Python中的函数作用域都属于静态作用域。句法块是由花括弧所包含的一系列语句，句法块内部声明的名字是无法被外部块访问的。这个块决定了内部声明的名字的作用域范围。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">var</span> x = <span class="number">100</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(x <span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line">	x = <span class="number">200</span></span><br><span class="line">	fmt.Println(x)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	test(x)</span><br><span class="line">	fmt.Println(x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当编译器遇到一个名字引用时，它会对其定义进行查找，查找过程从最内层的词法域向全局的作用域进行。如果查找失败，则报告“未声明的名字”这样的错误。如果该名字在内部和外部的块分别声明过，则内部块的声明首先被找到。在这种情况下，内部声明屏蔽了外部同名的声明，让外部的声明的名字无法被访问。</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>go中多种数据类型的出现是为了把数据分成所需内存大小不同的数据。编程时需要用到大数据时，才会申请大内存，达到充分利用内存的目的。</p>
<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" width="60%"></div>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"unsafe"</span></span><br><span class="line">)</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>	&#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="keyword">int8</span> = <span class="number">100</span>  <span class="comment">// int8 能够表示的值不能超过255，否则会报错，超过需要用大一点的数据类型</span></span><br><span class="line">	<span class="keyword">var</span> b <span class="keyword">int</span> = <span class="number">100</span>  <span class="comment">// int表示的位数是和计算机位数一致的</span></span><br><span class="line">	fmt.Println(unsafe.Sizeof(a))  <span class="comment">// 1， 占内存大小1个字节</span></span><br><span class="line">	fmt.Println(unsafe.Sizeof(b)) <span class="comment">// 8， 占8个字节</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>表示“ ” 或 ` `</p>
<p>字符串常用操作：<br>库：stings<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Contains： 判断是否包含字符串</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Contains</span><span class="params">(s, substr <span class="keyword">string</span>)</span> <span class="title">bool</span></span></span><br><span class="line"><span class="function"> <span class="title">Count</span>: 输出字符串中自字符的个数</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="title">Count</span><span class="params">(s, sep <span class="keyword">string</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="function"> <span class="title">Index</span>: 返回字符第一次出现的位置，不存在返回 -1</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="title">Index</span><span class="params">(s, sep <span class="keyword">string</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="function"> <span class="title">Join</span>: 按给定的分隔符拼接一个字符串切片成字符串</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="title">Join</span><span class="params">(a []<span class="keyword">string</span>, sep <span class="keyword">string</span>)</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"> <span class="title">LastIndex</span>: 子串最后一次出现的位置</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="title">LastIndex</span><span class="params">(s, sep <span class="keyword">string</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="function"> <span class="title">ToLower</span>: 將字符串全部小寫</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="title">ToLower</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"> <span class="title">ToUpper</span>: 將字符串全部大寫</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="title">ToUpper</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"> <span class="title">Repeat</span>: 重復字符串</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="title">Repeat</span><span class="params">(s <span class="keyword">string</span>, count <span class="keyword">int</span> )</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"> <span class="title">Replace</span>: 替換</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="title">Replace</span><span class="params">(s, old, <span class="built_in">new</span> <span class="keyword">string</span>, n <span class="keyword">int</span>)</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"> <span class="title">TrimSpace</span>: 去除字符串前後空格</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="title">TrimSpace</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"> <span class="title">Split</span>: 切割</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="title">Split</span><span class="params">(s, sep <span class="keyword">string</span>)</span> []<span class="title">string</span></span></span><br></pre></td></tr></table></figure></p>
<p><strong>类型别名</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"reflect"</span></span><br><span class="line">	<span class="string">"unsafe"</span></span><br><span class="line">)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">type</span>  我是别名 <span class="keyword">string</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> 我是变量名 我是别名</span><br><span class="line">	<span class="keyword">var</span> 我也是变量名 <span class="keyword">string</span></span><br><span class="line">	fmt.Println(reflect.TypeOf(我是变量名))  <span class="comment">// main.我是别名</span></span><br><span class="line">	fmt.Println(reflect.TypeOf(我也是变量名))  <span class="comment">// string  </span></span><br><span class="line">	fmt.Println(unsafe.Sizeof(我是变量名))  <span class="comment">// 16</span></span><br><span class="line">	fmt.Println(unsafe.Sizeof(我也是变量名))  <span class="comment">// 16</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 别名的类型是不一样的， 不能相互运算</span></span><br></pre></td></tr></table></figure></p>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>固定长度列表的列表在Golang中叫数组。长度不固定的叫切片。数组的长度是数组类型的一个组成部分，因此[3]int和[4]int是两种不同的数组类型。</p>
<p><strong>定义</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> NumberList = [<span class="number">3</span>]<span class="keyword">string</span></span><br><span class="line">NumberList = [<span class="number">3</span>]<span class="keyword">string</span>&#123;<span class="string">"Python"</span>, <span class="string">"Golang"</span>, <span class="string">"Java"</span>&#125;</span><br><span class="line">​</span><br><span class="line">q := [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="comment">// 如果在数组的长度位置出现的是“...”省略号，则表示数组的长度是根据初始化值的个数来计算</span></span><br></pre></td></tr></table></figure></p>
<p>编程中,凡是可以使用if…else的都可以使用数组来遍历,再对遍历的值进行操作.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span>  <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">var</span> list [<span class="number">5</span>]<span class="keyword">int</span></span><br><span class="line">list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]  <span class="comment">// 格式错误</span></span><br><span class="line">list = [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;  <span class="comment">// syntax error: non-declaration statement outside function body</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(list)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// </span></span><br><span class="line">获取数组长度: <span class="built_in">len</span>()</span><br><span class="line">获取数组容量: <span class="built_in">cap</span>()</span><br></pre></td></tr></table></figure></p>
<h3 id="Slice"><a href="#Slice" class="headerlink" title="Slice"></a>Slice</h3><p>slice的底层确实引用一个数组对象。一个slice由三个部分构成：指针、长度和容量。<br>内置的make函数创建一个指定元素类型、长度和容量的slice。容量部分可以省略，在这种情况下，容量将等于长度。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span>([]T, <span class="built_in">len</span>)</span><br><span class="line"><span class="built_in">make</span>([]T, <span class="built_in">len</span>, <span class="built_in">cap</span>) <span class="comment">// same as make([]T, cap)[:len]</span></span><br></pre></td></tr></table></figure></p>
<p>如果切片操作超出cap(s)的上限将导致一个panic异常，但是超出len(s)则是意味着扩展了slice，因为新slice的长度会变大<br>切片相当于不固定长的数组. 可以初始设置容量, 超过容量后,自动扩充。</p>
<p>len 获取长度; cap 获取容量</p>
<p><strong>常用的操作</strong></p>
<p><strong>slice操作</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">        value []<span class="keyword">string</span></span><br><span class="line">    )</span><br><span class="line">​</span><br><span class="line">    value = []<span class="keyword">string</span>&#123;</span><br><span class="line">        <span class="string">"xieWei"</span>,</span><br><span class="line">        <span class="string">"weiWei"</span>,</span><br><span class="line">        <span class="string">"wuWei"</span>,</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    fmt.Print(value[<span class="number">1</span>:])</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">&gt;&gt;&gt; [weiWei wuWei]</span><br></pre></td></tr></table></figure>
<p><strong>append操作</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">        value []<span class="keyword">string</span></span><br><span class="line">    )</span><br><span class="line">​</span><br><span class="line">    value = []<span class="keyword">string</span>&#123;</span><br><span class="line">        <span class="string">"xieWei"</span>,</span><br><span class="line">        <span class="string">"weiWei"</span>,</span><br><span class="line">        <span class="string">"wuWei"</span>,</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    value = <span class="built_in">append</span>(value, <span class="string">"shenWei"</span>)</span><br><span class="line">    fmt.Println(value)</span><br><span class="line">&#125;</span><br><span class="line">&gt;&gt;&gt; [xieWei weiWei wuWei shenWei]</span><br></pre></td></tr></table></figure>
<p>​<br><strong>range 操作</strong></p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">        value []<span class="keyword">string</span></span><br><span class="line">    )</span><br><span class="line">​</span><br><span class="line">    value = []<span class="keyword">string</span>&#123;</span><br><span class="line">        <span class="string">"xieWei"</span>,</span><br><span class="line">        <span class="string">"weiWei"</span>,</span><br><span class="line">        <span class="string">"wuWei"</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> index, i:= <span class="keyword">range</span> value&#123;</span><br><span class="line">        fmt.Println(index, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">&gt;&gt;&gt; </span><br><span class="line"><span class="number">0</span> xieWei</span><br><span class="line"><span class="number">1</span> weiWei</span><br><span class="line"><span class="number">2</span> wuWei</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"reflect"</span></span><br><span class="line">)</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := [...]<span class="keyword">string</span>&#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>&#125;</span><br><span class="line">	b := [...]<span class="keyword">string</span>&#123;<span class="number">1</span>: <span class="string">"a"</span>, <span class="number">2</span>: <span class="string">"b"</span>, <span class="number">3</span>: <span class="string">"c"</span>, <span class="number">4</span>: <span class="string">"d"</span>&#125;</span><br><span class="line">	c := [...]<span class="keyword">string</span>&#123;<span class="number">0</span>: <span class="string">"a"</span>, <span class="number">1</span>: <span class="string">"b"</span>, <span class="number">2</span>: <span class="string">"c"</span>, <span class="number">3</span>: <span class="string">"d"</span>&#125;</span><br><span class="line">	fmt.Println(reflect.TypeOf(a))  <span class="comment">//[4]string</span></span><br><span class="line">	fmt.Println(reflect.TypeOf(b))  <span class="comment">//[5]string ??</span></span><br><span class="line">	fmt.Println(reflect.TypeOf(c))  <span class="comment">//[4]string</span></span><br><span class="line">​</span><br><span class="line"><span class="comment">// 另一种表示 ？？</span></span><br><span class="line">	<span class="keyword">var</span> (</span><br><span class="line">        value []<span class="keyword">string</span></span><br><span class="line">    )</span><br><span class="line">​</span><br><span class="line">    value = []<span class="keyword">string</span>&#123;</span><br><span class="line">        <span class="string">"xieWei"</span>,</span><br><span class="line">        <span class="string">"weiWei"</span>,</span><br><span class="line">        <span class="string">"wuWei"</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    value = <span class="built_in">append</span>(value, <span class="string">"shenWei"</span>)  <span class="comment">// append操作</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> index, i:= <span class="keyword">range</span> value&#123;  <span class="comment">// 遍历操作</span></span><br><span class="line">        fmt.Println(index, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// 和Python不同, 切片的更改会影响影响原数组(切片与原数组的关系??)</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	b := [...]<span class="keyword">string</span>&#123;<span class="number">1</span>: <span class="string">"a"</span>, <span class="number">2</span>: <span class="string">"b"</span>, <span class="number">3</span>: <span class="string">"c"</span>, <span class="number">4</span>: <span class="string">"d"</span>&#125;</span><br><span class="line">	d := b[:<span class="number">3</span>]</span><br><span class="line">	d[<span class="number">0</span>] = <span class="string">"first"</span></span><br><span class="line">	fmt.Println(d)</span><br><span class="line">	fmt.Println(b)  <span class="comment">//[first a b c d]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><h3 id="Strcut"><a href="#Strcut" class="headerlink" title="Strcut"></a>Strcut</h3><p>结构体可以包含多种数据类型，数组只能是单一类型的数据集合。结构体在 Golang 里面的作用非常大，既有数据类型，又可以有方法，相当于其他语言中的类。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">值传递 一般获取值: <span class="function"><span class="keyword">func</span> <span class="params">(m MyExample)</span> <span class="title">GetAttrName</span><span class="params">()</span><span class="title">string</span></span></span><br><span class="line"><span class="function">指针传递一般改变值: <span class="title">func</span> <span class="params">(m *MyExample)</span> <span class="title">SetAttrAge</span><span class="params">(newAge <span class="keyword">int</span>)</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyExample <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="keyword">string</span></span><br><span class="line">    Age <span class="keyword">int</span></span><br><span class="line">    School <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">declare</span><span class="params">()</span> <span class="title">MyExample</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">        example MyExample</span><br><span class="line">    )</span><br><span class="line">    example.Name = <span class="string">"xieWei"</span></span><br><span class="line">    example.Age = <span class="number">26</span></span><br><span class="line">    example.School = <span class="string">"shanghaiUniversity"</span></span><br><span class="line">    fmt.Println(example)</span><br><span class="line">    <span class="keyword">return</span> example</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m MyExample)</span> <span class="title">GetAttrName</span><span class="params">()</span><span class="title">string</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m.Name</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *MyExample)</span> <span class="title">SetAttrAge</span><span class="params">(newAge <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    m.Age = newAge</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    test := declare()</span><br><span class="line">    fmt.Println(test.GetAttrName())</span><br><span class="line">    fmt.Println(test)</span><br><span class="line">    test.SetAttrAge(<span class="number">18</span>)</span><br><span class="line">    fmt.Println(test)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">&gt;&gt;&gt; </span><br><span class="line">&#123;xieWei <span class="number">26</span> shanghaiUniversity&#125;</span><br><span class="line">xieWei</span><br><span class="line">&#123;xieWei <span class="number">26</span> shanghaiUniversity&#125;</span><br><span class="line">&#123;xieWei <span class="number">18</span> shanghaiUniversity&#125;</span><br><span class="line">​</span><br></pre></td></tr></table></figure>
<p><strong>匿名字段</strong><br>即隐式的引入一个结构体的所有字段</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyExample <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="keyword">string</span></span><br><span class="line">    Age <span class="keyword">int</span></span><br><span class="line">    School <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> OtherExample <span class="keyword">struct</span> &#123;</span><br><span class="line">    MyExample</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// OtherExample 自动拥有 Name, Age, School 字段</span></span><br></pre></td></tr></table></figure>
<p>​<br><strong>定义及声明</strong><br>type 和 struct 关键字构成结构体的声明。<br>在 Golang 中， 结构体可以当做是一种数据类型。所以可以这样这样操作：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Name <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> Infor Name</span><br></pre></td></tr></table></figure></p>
<p>​<br>另外，结构体在 golang 中的作用又可以当做类。所以又存在方法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Name <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(n Name)</span> <span class="title">ResponseNumber</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>调用结构体方法是使用 点号<code>.</code></strong></p>
<p>​<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name Name</span><br><span class="line">    name.ResponseNumber()</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">声明示例：</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Information <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name    <span class="keyword">string</span></span><br><span class="line">    Age     <span class="keyword">int</span></span><br><span class="line">    School  <span class="keyword">string</span></span><br><span class="line">    Married <span class="keyword">bool</span></span><br><span class="line">    Habits  []<span class="keyword">string</span></span><br><span class="line">    Infor   <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleInformationDeclare</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// one</span></span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">        exampleInformationOne Information</span><br><span class="line">        Infor                 <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">    )</span><br><span class="line">    Infor = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">    Infor[<span class="string">"key"</span>] = <span class="string">"hello-world"</span></span><br><span class="line">    exampleInformationOne = Information&#123;</span><br><span class="line">        <span class="string">"xiewei"</span>, <span class="number">18</span>, <span class="string">"shanghaiUniversity"</span>, <span class="literal">true</span>,</span><br><span class="line">        []<span class="keyword">string</span>&#123;<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>&#125;, Infor,</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(exampleInformationOne, exampleInformationOne.Name)</span><br><span class="line">​</span><br><span class="line">    <span class="comment">// two</span></span><br><span class="line">    <span class="keyword">var</span> exampleInformationTwo Information</span><br><span class="line">    exampleInformationTwo.Name = <span class="string">"golang"</span></span><br><span class="line">    exampleInformationTwo.School = <span class="string">"Google"</span></span><br><span class="line">    exampleInformationTwo.Age = <span class="number">10</span></span><br><span class="line">    exampleInformationTwo.Infor = Infor</span><br><span class="line">​</span><br><span class="line">    fmt.Println(exampleInformationTwo, exampleInformationTwo.Married)</span><br><span class="line">​</span><br><span class="line">    <span class="comment">// three</span></span><br><span class="line">    <span class="keyword">var</span> exampleInformationThree Information</span><br><span class="line">    exampleInformationThree = Information&#123;</span><br><span class="line">        Name:    <span class="string">"Python"</span>,</span><br><span class="line">        School:  <span class="string">"Gudio school"</span>,</span><br><span class="line">        Age:     <span class="number">18</span>,</span><br><span class="line">        Habits:  []<span class="keyword">string</span>&#123;<span class="string">"1"</span>, <span class="string">"2"</span>&#125;,</span><br><span class="line">        Infor:   Infor,</span><br><span class="line">        Married: <span class="literal">true</span>,</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    fmt.Println(exampleInformationThree, exampleInformationThree.School)</span><br><span class="line">​</span><br><span class="line">    <span class="comment">// four</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">var</span> exampleInformationFour *Information</span><br><span class="line">    exampleInformationFour = <span class="built_in">new</span>(Information)</span><br><span class="line">    exampleInformationFour.Name = <span class="string">"Java"</span></span><br><span class="line">​</span><br><span class="line">    fmt.Println(exampleInformationFour, exampleInformationFour.School)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    exampleInformationDeclare()</span><br><span class="line">&#125;</span><br><span class="line">​</span><br></pre></td></tr></table></figure></p>
<p><strong>标签</strong><br>这种带标签的结构体的定义，在转换为json格式的数据的时候会自动将对应的字段转换为标签中的字段：<br>比如：Name 转换为 name 字段。</p>
<p>标签字段不能在编程中实际使用。<br>比如：可以这样: <code>InformationWithLabel.Name</code><br>不可以这样：<code>InformationWithLabel.name</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> InformationWithLabel <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="keyword">string</span> <span class="string">`json:"name"`</span></span><br><span class="line">    Age  <span class="keyword">int</span>    <span class="string">`json:"age"`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>字段的访问</strong><br>结构体内的是一系列相关字段的集合。如果定义了一个结构体如何访问?</p>
<p>可以使用点号获取结构体的字段。</p>
<p>比如：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> InformationWithLabel <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="keyword">string</span> <span class="string">`json:"name"`</span></span><br><span class="line">    Age  <span class="keyword">int</span>    <span class="string">`json:"age"`</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleInformationWithLabelFiled</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> example InformationWithLabel</span><br><span class="line">    example = InformationWithLabel&#123;</span><br><span class="line">        Name: <span class="string">"xiewei"</span>,</span><br><span class="line">        Age:  <span class="number">18</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(example.Name, example.Age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>​<br>​<strong>方法</strong><br>上文讲到在 golang 中结构体相当于面向对象中的类。所以存在方法。<br>方法根据传入的参数的不同，又分为：值传递 和 指针传递。两者的效果就是：值传递不可改变值，指针传递可以改变值。<br>示例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Response <span class="keyword">struct</span> &#123;</span><br><span class="line">    Code    <span class="keyword">int</span></span><br><span class="line">    Result  []<span class="keyword">byte</span></span><br><span class="line">    Headers <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Response)</span> <span class="title">GetAttrCode</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r.Code</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Response)</span> <span class="title">GetAttrResult</span><span class="params">()</span> []<span class="title">byte</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r.Result</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Response)</span> <span class="title">GetAttrHeader</span><span class="params">()</span> <span class="title">map</span>[<span class="title">string</span>]<span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r.Headers</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Response)</span> <span class="title">SetCode</span><span class="params">(code <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    r.Code = code</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Response)</span> <span class="title">SetHeaders</span><span class="params">(key, value <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    r.Headers[key] = value</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleResponse</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">        response Response</span><br><span class="line">        headers  <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">    )</span><br><span class="line">    headers = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">    headers[<span class="string">"Server"</span>] = <span class="string">"GitHub.com"</span></span><br><span class="line">    headers[<span class="string">"Status"</span>] = <span class="string">"Ok"</span></span><br><span class="line">    response.Headers = headers</span><br><span class="line">    response.Code = <span class="number">200</span></span><br><span class="line">    response.Result = []<span class="keyword">byte</span>(<span class="string">"hello world"</span>)</span><br><span class="line">​</span><br><span class="line">    fmt.Println(response.GetAttrCode())</span><br><span class="line">    fmt.Println(response.GetAttrHeader())</span><br><span class="line">    fmt.Println(response.GetAttrResult())</span><br><span class="line">​</span><br><span class="line">    response.SetCode(<span class="number">404</span>)</span><br><span class="line">    fmt.Println(response)</span><br><span class="line">​</span><br><span class="line">    response.SetHeaders(<span class="string">"Status"</span>, <span class="string">"failed"</span>)</span><br><span class="line">    fmt.Println(response)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    exampleResponse()</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">​</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">​</span><br><span class="line"><span class="number">200</span></span><br><span class="line"><span class="keyword">map</span>[Server:GitHub.com Status:Ok]</span><br><span class="line">[<span class="number">104</span> <span class="number">101</span> <span class="number">108</span> <span class="number">108</span> <span class="number">111</span> <span class="number">32</span> <span class="number">119</span> <span class="number">111</span> <span class="number">114</span> <span class="number">108</span> <span class="number">100</span>]</span><br><span class="line">&#123;<span class="number">404</span> [<span class="number">104</span> <span class="number">101</span> <span class="number">108</span> <span class="number">108</span> <span class="number">111</span> <span class="number">32</span> <span class="number">119</span> <span class="number">111</span> <span class="number">114</span> <span class="number">108</span> <span class="number">100</span>] <span class="keyword">map</span>[Server:GitHub.com Status:Ok]&#125;</span><br><span class="line">&#123;<span class="number">404</span> [<span class="number">104</span> <span class="number">101</span> <span class="number">108</span> <span class="number">108</span> <span class="number">111</span> <span class="number">32</span> <span class="number">119</span> <span class="number">111</span> <span class="number">114</span> <span class="number">108</span> <span class="number">100</span>] <span class="keyword">map</span>[Status:failed Server:GitHub.com]&#125;</span><br></pre></td></tr></table></figure>
<p>可以看出：</p>
<ul>
<li>结构体的方法如何定义</li>
<li>值传递的适用于取值</li>
<li>指针传递适用于更改字段的值</li>
</ul>
<p>同时 方法和普通的函数的定义又有些许的不同。</p>
<p><strong>函数和方法的区别</strong><br>Golang 中函数和方法存在区别。</p>
<p>先看示例：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NormalFunc</span><span class="params">(arg <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> arg + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Response)</span> <span class="title">SetCode</span><span class="params">(code <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    r.Code = code</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Go 方法是作用在接收者（receiver）上的一个函数。接收者可以是几乎任何类型。但一般选择 结构体 作为接收者。</p>
<p><strong>组合</strong><br>匿名字段<br>在 Golang 中可以通过结构体的组合实现类的继承。<br>即：将一个结构体A当成另一个结构体B的匿名字段，则 这个结构体B自动拥有A的所有字段和方法。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Response <span class="keyword">struct</span> &#123;</span><br><span class="line">    Code    <span class="keyword">int</span></span><br><span class="line">    Result  []<span class="keyword">byte</span></span><br><span class="line">    Headers <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Response)</span> <span class="title">GetAttrCode</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r.Code</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Response)</span> <span class="title">GetAttrResult</span><span class="params">()</span> []<span class="title">byte</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r.Result</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Response)</span> <span class="title">GetAttrHeader</span><span class="params">()</span> <span class="title">map</span>[<span class="title">string</span>]<span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r.Headers</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Response)</span> <span class="title">SetCode</span><span class="params">(code <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    r.Code = code</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Response)</span> <span class="title">SetHeaders</span><span class="params">(key, value <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    r.Headers[key] = value</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">type</span> Requests <span class="keyword">struct</span> &#123;</span><br><span class="line">    Url    <span class="keyword">string</span></span><br><span class="line">    Params <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">type</span> CollectionRequests <span class="keyword">struct</span> &#123;</span><br><span class="line">    CollectionNumber <span class="keyword">int</span></span><br><span class="line">    Requests</span><br><span class="line">    Response</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleCollectionRequests</span><span class="params">()</span></span> &#123;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">var</span> collectionRequests CollectionRequests</span><br><span class="line">    collectionRequests.CollectionNumber = <span class="number">10</span></span><br><span class="line">    collectionRequests.Url = <span class="string">"https://www.example.com"</span></span><br><span class="line">    collectionRequests.Params = <span class="string">"name"</span></span><br><span class="line">    collectionRequests.Code = <span class="number">201</span></span><br><span class="line">    collectionRequests.Result = []<span class="keyword">byte</span>(<span class="string">"hello Golang"</span>)</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">var</span> headers <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">    headers = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">    headers[<span class="string">"status"</span>] = <span class="string">"Good"</span></span><br><span class="line">    collectionRequests.Headers = headers</span><br><span class="line">    fmt.Println(collectionRequests)</span><br><span class="line">    </span><br><span class="line">    fmt.Println(collectionRequests.GetAttrCode())</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    exampleCollectionRequests()</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&#123;<span class="number">10</span> &#123;https:<span class="comment">//www.example.com name&#125; &#123;201 [104 101 108 108 111 32 71 111 108 97 110 103] map[status:Good]&#125;&#125;</span></span><br><span class="line"><span class="number">201</span></span><br></pre></td></tr></table></figure>
<p>上文CollectionRequests 拥有两个匿名字段Requests、Response ，则自动拥有这个两个结构体的字段和方法。</p>
<p><strong>内嵌结构体</strong><br>这个组合的形式会遇到两个问题：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">字段相同怎么办？即结构体A 有字段 a, 结构体 B 也有字段 a。怎么处理？</span><br><span class="line">方法相同怎么办？即结构体A 有方法 methodOne, 结构体 B 也有方法 methodOne。怎么处理？</span><br></pre></td></tr></table></figure></p>
<p>应该尽量避免命名冲突。同时可以使用多个点号的方法访问字段。方法则优先使用结构体B 的。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">type</span> OtherRequests <span class="keyword">struct</span> &#123;</span><br><span class="line">    Request Requests</span><br><span class="line">    Resp    Response</span><br><span class="line">    Code    <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(o OtherRequests)</span> <span class="title">GetAttrCode</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(fmt.Sprintf(<span class="string">"Outer Code = %d"</span>, o.Code))</span><br><span class="line">    fmt.Println(fmt.Sprintf(<span class="string">"inner Code = %d"</span>, o.Resp.Code))</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleOtherRequests</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> other OtherRequests</span><br><span class="line">    other.Code = <span class="number">201</span></span><br><span class="line">    other.Resp.Code = <span class="number">202</span></span><br><span class="line">    fmt.Println(other)</span><br><span class="line">    other.GetAttrCode()</span><br><span class="line">    fmt.Println(other.Resp.GetAttrCode())</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    exampleOtherRequests()</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">​</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&#123;&#123; &#125; &#123;<span class="number">202</span> [] <span class="keyword">map</span>[]&#125; <span class="number">201</span>&#125;</span><br><span class="line">Outer Code = <span class="number">201</span></span><br><span class="line">inner Code = <span class="number">202</span></span><br><span class="line"><span class="number">202</span></span><br></pre></td></tr></table></figure></p>
<p>可以看出通过组合结构体的方式，可以实现类中的继承和多态。</p>
<p><strong>格式化显示结构体</strong><br>为理解这一节，我们先看看 Python 中如何格式化显示Class<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class Info(object):</span><br><span class="line">​</span><br><span class="line">    def __init__(self, name, age, school):</span><br><span class="line">        self.Name = name</span><br><span class="line">        self.Age = age</span><br><span class="line">        self.School = school</span><br><span class="line">​</span><br><span class="line">    def __repr__(self):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Name = &#123;&#125;, Age = &#123;&#125;, School = &#123;&#125; "</span>.format(self.Name, self.Age, self.School)</span><br><span class="line">​</span><br><span class="line">    def __str__(self):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Name = &#123;&#125;, Age = &#123;&#125;, School = &#123;&#125; "</span>.format(self.Name, self.Age, self.School)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    A = Info(<span class="string">"xieWei"</span>, <span class="number">20</span>, <span class="string">"shanghaiUniversity"</span>)</span><br><span class="line">    <span class="built_in">print</span>(A)</span><br><span class="line">​</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">​</span><br><span class="line">Name = xieWei, Age = <span class="number">20</span>, School = shanghaiUniversity</span><br></pre></td></tr></table></figure></p>
<p>同样在 Golang 中只需要实现一个名为 String 的方法即可格式化显示结构体。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> OtherRequests <span class="keyword">struct</span> &#123;</span><br><span class="line">    Request Requests</span><br><span class="line">    Resp    Response</span><br><span class="line">    Code    <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(o OtherRequests)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fmt.Sprintf(<span class="string">"Request = %v , Response = %v , Code = %d"</span>, o.Request, o.Resp, o.Code)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleOtherRequests</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> other OtherRequests</span><br><span class="line">    other.Code = <span class="number">201</span></span><br><span class="line">    other.Resp.Code = <span class="number">202</span></span><br><span class="line">    fmt.Println(other)</span><br><span class="line">    other.GetAttrCode()</span><br><span class="line">    fmt.Println(other.Resp.GetAttrCode())</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">​</span><br><span class="line">    exampleOtherRequests()</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">Request = &#123; &#125; , Response = &#123;<span class="number">202</span> [] <span class="keyword">map</span>[]&#125; , Code = <span class="number">201</span></span><br><span class="line">Outer Code = <span class="number">201</span></span><br><span class="line">inner Code = <span class="number">202</span></span><br><span class="line"><span class="number">202</span></span><br></pre></td></tr></table></figure></p>
<h3 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h3><p>Golang也提供了指针，但不能进行指针运算，因此相对于C也少了很多复杂度。私以为，go之所以提供指针，并不是为了让你更多和内存打交道，而是提供操作数据的基本桥梁。因为go很多调用，往往复制一份对象，例如函数的参数，如果没有指针，有些情况不得不存在很多副本。</p>
<p><strong>定义</strong><br>类似于变量和常量，在使用 指针 前你需要声明指针。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var-type 为指针类型，var_name 为指针变量名，* 号用于指定变量是作为一个指针。</span></span><br><span class="line"><span class="keyword">var</span> var_name *<span class="keyword">var</span>-<span class="keyword">type</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">var</span> ip *<span class="keyword">int</span>        <span class="comment">/* 指向整型变量*/</span></span><br><span class="line"><span class="keyword">var</span> fp *<span class="keyword">float32</span>    <span class="comment">/* 指向浮点型变量 */</span></span><br><span class="line">当一个指针被定义后没有分配到任何变量时，它的值为 <span class="literal">nil</span>。</span><br></pre></td></tr></table></figure></p>
<p><strong>Golang何时该使用指针</strong><br>一个函数何时该用指针类型做receiver对初学者而言一直是个头疼的问题。如果不知道该如何取舍，选择指针类型的receiver。但有些时候value receiver更加合适，比如对象是一些轻量级的不变的structs，使用value receiver会更加高效。下面是列举了一些常用的判断指导。</p>
<p>如果receiver是map、func或者chan，不要使用指针</p>
<p>如果receiver是slice并且该函数并不会修改此slice，不要使用指针</p>
<p>如果该函数会修改receiver，此时一定要用指针</p>
<p>如果receiver是struct并且包含互斥类型sync.Mutex，或者是类似的同步变量，receiver必须是指针，这样可以避免对象拷贝</p>
<p>如果receiver是较大的struct或者array，使用指针则更加高效。多大才算大？假设struct内所有成员都要作为函数变量传进去，如果觉得这时数据太多，就是struct太大</p>
<p>如果receiver是struct，array或者slice，并且其中某个element指向了某个可变量，则这个时候receiver选指针会使代码的意图更加明显</p>
<p>如果receiver使较小的struct或者array，并且其变量都是些不变量、常量，例如time.Time，value receiver更加适合，因为value receiver可以减少需要回收的垃圾量。</p>
<p>最后，如果不确定用哪个，使用指针类的receiver</p>
<p><strong>变量, 变量的值, 变量指针</strong><br>变量: 变量是一种占位符, 用于引用计算机内存的地址, 可以理解为内存地址的标签</p>
<p>指针: 指向其他变量内存地址的值</p>
<p><strong>什么是内存？</strong><br>计算机的内存 RAM 可以把它想象成一些有序的盒子，一个接一个的排成一排，每一个盒子或者单元格都被一个唯一的数字标记依次递增，这个数字就是该单元格的地址，也就是内存的地址。</p>
<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/%E5%86%85%E5%AD%98.png" width="80%"></div>

<p>每一个单元格存储单一的值，如果你知道一个单元格的地址，那么你就可以通过地址读取单元格中的内容。你也可以向这个单元格中放置一个值来替代之前的任何值。</p>
<p>这就是关于内存的所有内容。CPU 所做的一切操作也都是在读取或者存储单元格中值。</p>
<p><strong>什么是变量？</strong><br>编写一段程序，检索出值并存储在地址为 200 的一个块内存中，将其乘以 3，并将结果存储在地址为 201 的另一块内存中，我们就可以像这样写一段伪代码：</p>
<p>检索出内存地址为 200 的值，并将其存储在 CPU 中</p>
<p>将存储在 CPU 中的值乘以 3</p>
<p>将 CPU 中存储的结果，写入地址为 201 的内存块中</p>
<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/%E5%86%85%E5%AD%982.png" width="80%"></div>

<p>这是相当早期的编程形式，程序员需要维护一列内存地址。很显然这是非常枯燥又很容易出错的方式，并且还意味着你要为程序构建过程中内存中的每一个可能出现的值分配地址。更糟糕的是这种设计使得你动态的为变量分配存储变得很艰难，你可以想象一下如果编写一个大型的程序而只能使用全局变量是什么感受？</p>
<p>为了解决这个问题，变量的概念被创造了出来，一个变量仅仅是一个代表内存地址的字母数字组合、也可以一个标签或者一个昵称 。</p>
<p>现在，我们与其探讨内存地址，不如说一下变量，变量是我们为内存地址赋予的一个更容易理解的名称，之前的那个程序现在可以这样的解释一下：</p>
<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/%E5%86%85%E5%AD%983.png" width="50%"></div>

<p>获取变量 a 中存储的值，并将其存储在 CPU 中</p>
<p>将其乘以 3</p>
<p>将结果保存在变量 b 中</p>
<p>这是一个相同的程序，唯一的一个重要改进是 我们不在直接关注内存地址了，我们也不在需要持续追踪内存地址，而是把这个苦差事交给了编译器。</p>
<p>内存，内存地址，内存存储的数据，变量名，这些概念几乎是计算机通过编程语言执行程序的基本套路。只不过高级语言往往帮我们隐藏了内存地址和变量名的映射。</p>
<p><strong>到底什么是指针呢？</strong><br>可以把 指针 看成是一种“类型”，这种类型的值是一个内存地址。例如有一个编号3抽屉，里面存放了一个指针，而这个指针的值是一个编号5，通过操作指针，我们可以直接操作编号5的内存数据。</p>
<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/%E5%86%85%E5%AD%984.png" width="50%"></div>

<p>指针的是内存地址，但是指针本身也是有内存地址的。正如指向别的抽屉，也有一个抽屉来存储它自己。指针的值是一个地址，是别的内存地址，指针的地址则是存储指针内存块的地址。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="comment">//交换值的函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap1</span><span class="params">(a, b <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	b, a = a, b</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// *int 指向整型的指针</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap2</span><span class="params">(a, b *<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// b指向的值赋值给a, a指向的值赋值给b</span></span><br><span class="line">	<span class="comment">// *b, *a = *a, *b</span></span><br><span class="line">	<span class="comment">// *a 取出 a 指针指向的值赋值给 c 变量(中间变量)</span></span><br><span class="line">	c := *a</span><br><span class="line">	<span class="comment">// *b 取出 b 指针的指向的值赋值给 a指针的值</span></span><br><span class="line">	<span class="comment">// 注意, 不能把值直接赋值给指针</span></span><br><span class="line">	<span class="comment">// 指针只是保存值的地址</span></span><br><span class="line">	<span class="comment">// 所以这里将 b 指针指向的值赋值给 a 指针指向的值, 即用 b 值覆盖 a 值</span></span><br><span class="line">	*a = *b</span><br><span class="line">	<span class="comment">// 最后用 c 变量的值, 覆盖 b 值</span></span><br><span class="line">	*b = c</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap3</span><span class="params">(a, b *<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	*a, *b = *b, *a</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap4</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 使用值传递的方式, 利用返回值来实现值的交换</span></span><br><span class="line">	<span class="keyword">return</span> b, a</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a, b := <span class="number">5</span>, <span class="number">9</span></span><br><span class="line">​</span><br><span class="line">	<span class="comment">// 值传递, 交换只在函数内生效, 不能改变外面的值</span></span><br><span class="line">	swap1(a, b)</span><br><span class="line">	fmt.Println(a, b)  <span class="comment">// 结果为: 5 9</span></span><br><span class="line">	<span class="comment">// 从结果中可以看出, a, b两个变量进入到函数是值拷贝, 在函数内的操作并没有改变函数外a, b实际的值</span></span><br><span class="line">​</span><br><span class="line">	<span class="comment">// 交换地址(引用传递)</span></span><br><span class="line">	swap2(&amp;a, &amp;b)</span><br><span class="line">	fmt.Println(a, b)</span><br><span class="line">​</span><br><span class="line">	<span class="comment">// 再次交换地址(引用传递)</span></span><br><span class="line">	swap3(&amp;a, &amp;b)</span><br><span class="line">	fmt.Println(a, b)</span><br><span class="line">​</span><br><span class="line">	<span class="comment">// 值传递, 利用返回值交换值</span></span><br><span class="line">	<span class="comment">// 注意返回值的顺序, 返回值里交换了, 接收返回值的顺序就不要变</span></span><br><span class="line">	<span class="comment">// 如果return是 a,b 那么接收的时候就要变成 b, a 去接收</span></span><br><span class="line">	a, b = swap4(a, b)</span><br><span class="line">	fmt.Println(a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>指针指向变量的内存地址，指针就像该变量值的内存地址一样</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := <span class="number">200</span></span><br><span class="line">    b := &amp;a</span><br><span class="line">    *b++</span><br><span class="line">    fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 main 函数的第一行，我们定义了一个新的变量 a ，并赋值为 200。接下来我们定义了一个变量 b ，并将变量 a 的地址赋值给 b 。我们并不知道 a 的准确存储地址，但是我们依然可以将 a 的地址存储在变量 b 中。</p>
<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/1.png" width="50%"></div>

<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/1.2.png" width="50%"></div>


<p>因为 Go 强类型的特性，第三行代码也许是最具干扰性的了，b 包含 a 变量的地址，但是我们想增加存储在 a 变量中的值。这样我们必须取消引用 b ，而是跟随指针由 b 引用 a。然后我们将该值加 1 后，存储回 b 中存储的内存地址上。最后一行打印了 a 的值，可以看到 a 的值已经增加为了 201</p>
<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/2.png" width="50%"></div>

<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/3.png" width="50%"></div>

<p><strong>值类型和引用类型</strong></p>
<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/11.png" width="50%"></div>

<p><strong>值类型</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">    name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p person)</span> <span class="title">print</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">"%+v"</span>, p)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p person)</span> <span class="title">updateName</span><span class="params">(newName <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    p.name = newName</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    jim := person&#123;name: <span class="string">"Jim"</span>&#125;</span><br><span class="line">    jim.updateName(<span class="string">"Jimmy"</span>)</span><br><span class="line">    jim.<span class="built_in">print</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/12.png" width="50%"></div>

<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/13.png" width="50%"></div><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line">​</span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">    name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p person)</span> <span class="title">print</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">"%+v"</span>, p)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(pointerToPerson *person)</span> <span class="title">updateName</span><span class="params">(newName <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    (*pointerToPerson).name = newName</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    jim := person&#123;name: <span class="string">"Jim"</span>&#125;</span><br><span class="line">    jimPointer := &amp;jim</span><br><span class="line">    jimPointer.updateName(<span class="string">"Jimmy"</span>)</span><br><span class="line">    jim.<span class="built_in">print</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/14.png" width="50%"></div>

<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/15.png" width="50%"></div>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">引用类型</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">updateSlice</span><span class="params">(s []<span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    s[<span class="number">0</span>] = <span class="string">"Bye"</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    mySlice := []<span class="keyword">string</span>&#123;<span class="string">"Hi"</span>, <span class="string">"There"</span>, <span class="string">"how"</span>, <span class="string">"are"</span>, <span class="string">"you?"</span>&#125;</span><br><span class="line">    updateSlice(mySlice)</span><br><span class="line">    fmt.Println(mySlice)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/16.png" width="50%"></div>

<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/17.png" width="50%"></div>

<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/18.png" width="50%"></div>



<p><strong>值语义和引用语义</strong><br>Go 语言中的大多数类型都是值语义。值语义和引用的区别在于赋值之后，重新赋值，是否会改变原值。</p>
<p>如果不改变原值，则是值语义。否则是引用语义，引用语义比值语义拥有更复杂的存储结构。比如分配内存、指针、长度、容量等。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">​</span><br><span class="line">    <span class="comment">// map、slice、channel</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">var</span> number <span class="keyword">int</span></span><br><span class="line">​</span><br><span class="line">    number = <span class="number">0</span></span><br><span class="line">    copyNumber := number</span><br><span class="line">    copyNumber = <span class="number">3</span></span><br><span class="line">​</span><br><span class="line">    fmt.Printf(<span class="string">"----: new=%v, old=%v\n"</span>, copyNumber, number)</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">var</span> List = [<span class="number">2</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">​</span><br><span class="line">    copyList := List</span><br><span class="line">    copyList[<span class="number">1</span>] = <span class="number">4</span></span><br><span class="line">​</span><br><span class="line">    fmt.Printf(<span class="string">"----: new=%v, old=%v\n"</span>, copyList, List)</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">type</span> Info <span class="keyword">struct</span> &#123;</span><br><span class="line">        Name   <span class="keyword">string</span></span><br><span class="line">        Age    <span class="keyword">int</span></span><br><span class="line">        School <span class="keyword">string</span></span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    oldInfo := Info&#123;</span><br><span class="line">        <span class="string">"xieWei"</span>, <span class="number">20</span>, <span class="string">"shanghaiUniversity"</span>,</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    newInfo := oldInfo</span><br><span class="line">    newInfo.Name = <span class="string">"xieWei2"</span></span><br><span class="line">​</span><br><span class="line">    fmt.Printf(<span class="string">"----: new=%v, old=%v\n"</span>, newInfo, oldInfo)</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">var</span> Body = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">    Body[<span class="string">"name"</span>] = <span class="string">"xieWei"</span></span><br><span class="line">    Body[<span class="string">"School"</span>] = <span class="string">"shanghaiUniversity"</span></span><br><span class="line">​</span><br><span class="line">    newBody := Body</span><br><span class="line">    newBody[<span class="string">"name"</span>] = <span class="string">"xieWei2"</span></span><br><span class="line">    newBody[<span class="string">"Age"</span>] = <span class="string">"20"</span></span><br><span class="line">​</span><br><span class="line">    fmt.Printf(<span class="string">"----: new=%v, old=%v\n"</span>, newBody, Body)</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">var</span> oldSlice = []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">​</span><br><span class="line">    newSlice := oldSlice</span><br><span class="line">    newSlice[<span class="number">3</span>] = <span class="number">10</span></span><br><span class="line">    newSlice = <span class="built_in">append</span>(newSlice, <span class="number">100</span>)</span><br><span class="line">​</span><br><span class="line">    fmt.Printf(<span class="string">"----: new=%v, old=%v\n"</span>, newSlice, oldSlice)</span><br><span class="line">​</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">结果：</span><br><span class="line"></span><br><span class="line">----: <span class="built_in">new</span>=<span class="number">3</span>, old=<span class="number">0</span></span><br><span class="line">----: <span class="built_in">new</span>=[<span class="number">1</span> <span class="number">4</span>], old=[<span class="number">1</span> <span class="number">2</span>]</span><br><span class="line">----: <span class="built_in">new</span>=&#123;xieWei2 <span class="number">20</span> shanghaiUniversity&#125;, old=&#123;xieWei <span class="number">20</span> shanghaiUniversity&#125;</span><br><span class="line">----: <span class="built_in">new</span>=<span class="keyword">map</span>[name:xieWei2 School:shanghaiUniversity Age:<span class="number">20</span>], old=<span class="keyword">map</span>[name:xieWei2 School:shanghaiUniversity Age:<span class="number">20</span>]</span><br><span class="line">----: <span class="built_in">new</span>=[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">10</span> <span class="number">100</span>], old=[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">10</span>]</span><br><span class="line">结论：</span><br><span class="line"></span><br><span class="line">在 Go 语言中值语义和引用语义的区别发生在赋值语句中。<span class="keyword">map</span>、slice、channel 这三种类型</span><br></pre></td></tr></table></figure></p>
<p>赋值之后，修改新的对象，会改变原对象的内容，是因为引用语义底层都指向的是地址</p>
<p>引用类型必须使用 make 函数创建，完成内存分配和相关属性的初始化。即：对应的值上都有初始化值，比如 int 类型，则初始化值为0， 比如 string 类型，则初始化为空，诸如此类<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> exampleSlice = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">4</span>)</span><br><span class="line">    exampleSlice[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    fmt.Println(exampleSlice)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">结果：</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>]</span><br><span class="line">只赋值第一个元素，其他元素默为<span class="number">0</span>。</span><br><span class="line"></span><br><span class="line">值语义的数据，想要改变元素值，需要使用指针：</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> exampleInt <span class="keyword">int</span></span><br><span class="line">​</span><br><span class="line">    exampleInt = <span class="number">4</span></span><br><span class="line">​</span><br><span class="line">    newExampleInt := &amp;exampleInt</span><br><span class="line">    *newExampleInt = <span class="number">40</span></span><br><span class="line">​</span><br><span class="line">    fmt.Println(exampleInt, *newExampleInt)</span><br><span class="line">结果：</span><br><span class="line"></span><br><span class="line"><span class="number">40</span> <span class="number">40</span></span><br><span class="line">内置函数 <span class="built_in">new</span> 按指定类型分配零值内存， 返回的是一个指针。</span><br><span class="line"></span><br><span class="line">    <span class="keyword">type</span> Info <span class="keyword">struct</span> &#123;</span><br><span class="line">        Name   <span class="keyword">string</span></span><br><span class="line">        Age    <span class="keyword">int</span></span><br><span class="line">        School <span class="keyword">string</span></span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    exampleBigInfo := <span class="built_in">new</span>(Info)</span><br><span class="line">    fmt.Println(exampleBigInfo)</span><br><span class="line">结果：</span><br><span class="line"></span><br><span class="line">&amp;&#123; <span class="number">0</span> &#125;</span><br><span class="line">可以看出：</span><br><span class="line"></span><br><span class="line">返回指针</span><br></pre></td></tr></table></figure></p>
<p>存在零值，比如 Name 为 ‘’, Age 为0，School 为 ‘’.</p>
<p>对于Go语言，严格意义上来讲，只有一种传递，也就是 按值传递 (by value)。当一个变量当作参数传递的时候，会创建一个变量的副本，然后传递给函数或者方法，你可以看到这个副本的地址和变量的地址是不一样的。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a <span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line">	fmt.Println(&amp;a)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	a := <span class="number">100</span></span><br><span class="line">	fmt.Println(&amp;a)</span><br><span class="line">	add(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>new()和make()</strong></p>
<h3 id="算术运算符："><a href="#算术运算符：" class="headerlink" title="算术运算符："></a>算术运算符：</h3><p>++ ， –  用法和js不同，是语句而不是表达式，没有x ：= p++这种写法</p>
<p>除法运算符/的行为则依赖于操作数是否全为整数，两个数都是整数时，结果才是整数</p>
<p>逻辑运算符：<br>&amp;&amp;（与），||（或），！（非）和Python好像不一样</p>
<p>位运算符：<br>和python一致</p>
<p>赋值运算符：<br>go中的所有运算符都可以和基本赋值运算符“ = ”组合，表示先进行操作，再赋值。</p>
<p>Go和Python不同，好像没有 is ，is not，not，in 运算符。</p>
<p>只有在类型一致的情况下，才可以进行操作运算。</p>
<h3 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h3><p>条件语句<br>条件语句if  .. else .. , if  .. else if  ..两种。if 语句没有（），只有{ }。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &lt;condition&gt; &#123;</span><br><span class="line">    ......</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> &lt;condition&gt;&#123;</span><br><span class="line">    ......</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"math"</span></span><br><span class="line">)</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sqrt</span><span class="params">(x <span class="keyword">float64</span>)</span> <span class="title">string</span></span>&#123;   <span class="comment">// 是否可以定义既可以输出字符串类型,或者整型??</span></span><br><span class="line">    <span class="keyword">if</span> x &lt; <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sqrt(-x) + <span class="string">"i"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fmt.Sprint(math.Sqrt(x))  <span class="comment">// fmt.Sprint() 什么作用??</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(sqrt(<span class="number">2</span>), sqrt(<span class="number">-4</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>选择语句<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	a = <span class="number">100</span></span><br><span class="line">	<span class="keyword">switch</span> a.(<span class="keyword">type</span>) &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="keyword">int</span>:</span><br><span class="line">		fmt.Println(<span class="string">"整数"</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="keyword">string</span>:</span><br><span class="line">		fmt.Println(<span class="string">"字符串"</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="keyword">int64</span>:</span><br><span class="line">		fmt.Println(<span class="string">"int64"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>循环语句<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Go 只有一种循环结构—— for 循环,没有 while 循环。基本的 for 循环没有( ),而 &#123; &#125;是必须的。</span></span><br><span class="line"><span class="comment">// for循环:</span></span><br><span class="line"><span class="comment">//形式一：</span></span><br><span class="line"><span class="keyword">for</span> &lt;init&gt;; &lt;condition&gt;; &lt;post&gt; &#123;</span><br><span class="line">　　.......</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    sum := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++&#123;</span><br><span class="line">        sum += <span class="number">1</span></span><br><span class="line">        fmt.Println(sum)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ======如何实现打印每一个值======??</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fib</span><span class="params">(n <span class="keyword">int</span>)</span>  <span class="title">int</span></span>&#123;</span><br><span class="line">    x, y := <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++&#123;</span><br><span class="line">        x, y = y ,x+y</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(fib(<span class="number">10</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := []<span class="keyword">string</span>&#123;<span class="string">"red"</span>,<span class="string">"orinage"</span>,<span class="string">"yellow"</span>,<span class="string">"green"</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> _,i := <span class="keyword">range</span> a &#123;  <span class="comment">// 只用一个变量接受也是可以的，但是只接受到索引</span></span><br><span class="line">		fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 没有循环条件就会进入无限循环</span></span><br><span class="line"><span class="keyword">for</span>&#123;</span><br><span class="line">　　........</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>goto break continue</p>
<div><img src="https://img-1256318300.cos.ap-shanghai.myqcloud.com/2018/05-06/goto.png" width="50%"></div>


<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>分类： 匿名函数, 结构体的方法, 普通函数</p>
<p><strong>可变参数</strong><br>参数列表的最后一个参数类型之前加上省略符号”…”</p>
<p>可变参数在函数体中看作为切片</p>
<p>可以直接将切片作为实参传递给可变参数函数，但需要在实参后加上省略号”…”<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// arg 单个参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleOneArg</span><span class="params">(arg <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    fmt.Println(arg + <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// arg list 不定参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleListArg</span><span class="params">(args ...<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> index, value := <span class="keyword">range</span> args &#123;</span><br><span class="line">        fmt.Println(index, value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>值传递和指针传递</strong><br> 在Go语言中，所有的函数参数都是值拷贝传入的。</p>
<p>​值传递和指针传递 针对的是函数的传入参数究竟是拷贝入参的值进行操作还是拷贝入参的内存地址，带来的效果就是一个能改变传入的参数的值，一个不能改变传入参数的值。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// copy value</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleValueCopy</span><span class="params">(arg <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    arg = arg + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> arg</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// copy address</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleValueAddress</span><span class="params">(arg *<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    *arg = *arg + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> *arg</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// main</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> arg <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">    exampleValueCopy(arg)</span><br><span class="line">    fmt.Println(arg) <span class="comment">// 10</span></span><br><span class="line">    exampleValueAddress(&amp;arg)</span><br><span class="line">    fmt.Println(arg) <span class="comment">// 11</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>返回值</strong><br>函数有返回值表示函数可以被赋值给变量</p>
<p>函数有返回值必须要有 return</p>
<p>命名返回值时,需要将名称和类型括起来</p>
<p>return返回的对象类型和函数的返回值类型必须一致<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// one response 单个返回值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleOneResponse</span><span class="params">(arg <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> arg*<span class="number">100</span> + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// two responses 多个返回值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleTwoResponses</span><span class="params">(arg <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> arg * <span class="number">10</span>, arg * <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// name response 命名返回值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleNameResponse</span><span class="params">(arg <span class="keyword">int</span>)</span> <span class="params">(sum <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    sum = arg * <span class="number">1000</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// main</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    exampleOneResponse(<span class="number">10</span>)</span><br><span class="line">    exampleTwoResponses(<span class="number">10</span>)</span><br><span class="line">    exampleNameResponse(<span class="number">10</span>)</span><br><span class="line">&#125;</span><br><span class="line">Go中的<span class="keyword">return</span>和Python不一样。Python中<span class="keyword">return</span>后为空时，始终返回None，并且可以返回函数中的任意对象。</span><br></pre></td></tr></table></figure></p>
<p>匿名函数<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// un name func</span></span><br><span class="line"><span class="keyword">var</span> NoNameFunc = <span class="function"><span class="keyword">func</span><span class="params">(arg <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123; <span class="keyword">return</span> arg * <span class="number">1000</span> &#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// main</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(NoNameFunc(<span class="number">10</span>)) <span class="comment">// 10000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>main 函数 和 init 函数<br>这两个函数没有入参和返回值</p>
<p>一个工程有且只有一个 main 函数作为程序的主入口</p>
<p>一个工程可以有多个init 函数，执行顺序和包的导入顺序相关</p>
<p><strong>​Go中的继承</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">​</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span>  </span><br><span class="line">​</span><br><span class="line"><span class="comment">// 嵌入结构作为匿名字段</span></span><br><span class="line"><span class="keyword">type</span> human <span class="keyword">struct</span> &#123;</span><br><span class="line">    Sex <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">type</span> teacher <span class="keyword">struct</span> &#123;</span><br><span class="line">    human            <span class="comment">// Go会将嵌入字段默认作为属性名,所以在赋值时需要这样写：human: human&#123;Sex: 1&#125;</span></span><br><span class="line">    Name <span class="keyword">string</span></span><br><span class="line">    Age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">    human</span><br><span class="line">    Name <span class="keyword">string</span></span><br><span class="line">    Age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">​</span><br><span class="line">    a := teacher&#123;Name:<span class="string">"Corwien"</span>, Age:<span class="number">25</span>, human: human&#123;Sex: <span class="number">1</span>&#125;&#125;</span><br><span class="line">    b := student&#123;Name:<span class="string">"mark"</span>, Age:<span class="number">12</span>, human: human&#123;Sex: <span class="number">1</span>&#125;&#125;</span><br><span class="line">    </span><br><span class="line">    a.Name = <span class="string">"Jack"</span></span><br><span class="line">    a.Age = <span class="number">10</span></span><br><span class="line">    <span class="comment">// a.human.Sex = 0</span></span><br><span class="line">    a.Sex = <span class="number">0</span></span><br><span class="line">    fmt.Println(a, b)</span><br><span class="line">​</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h3><p>需要指出的是 golang 不支持捕获异常， 比如 python 中的 try…except…finally</p>
<p>err 变量</p>
<p>error 接口</p>
<p>panic</p>
<p>recover 、defer</p>
<ol start="0">
<li>err<br>在golang 中如果需要进行错误处理，一般都默认函数的最后一个返回值是 err。</li>
</ol>
<p>比如：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">example</span><span class="params">(arg <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, error)</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> arg + <span class="number">1</span>, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br></pre></td></tr></table></figure></p>
<p>再比如看内置读取文件的ioutil.ReadAll 的定义<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ReadAll</span><span class="params">(r io.Reader)</span> <span class="params">([]<span class="keyword">byte</span>, error)</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> readAll(r, bytes.MinRead)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以看出，一般函数的最后一个返回值定义为 err, 可以通过这个 错误信息判断函数是否执行正确。</p>
<ol>
<li><p>error 接口<br>type error interface {<br> Error() string<br>}<br>​<br>内置 errors 包实现了这个接口：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> errors</span><br><span class="line">​</span><br><span class="line"><span class="comment">// New returns an error that formats as the given text.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">(text <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &amp;errorString&#123;text&#125;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// errorString is a trivial implementation of error.</span></span><br><span class="line"><span class="keyword">type</span> errorString <span class="keyword">struct</span> &#123;</span><br><span class="line">    s <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// 实现了 error 接口的Error 方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *errorString)</span> <span class="title">Error</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> e.s</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// 带格式输出的 error </span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Errorf</span><span class="params">(format <span class="keyword">string</span>, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> errors.New(Sprintf(format, a...))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">所以可以通过下面两种方法创建包含错误文本的 error 对象：</span><br><span class="line"></span><br><span class="line">errors.New</span><br><span class="line"></span><br><span class="line">fmt.Errorf 带格式化输出的 error 对象</span><br><span class="line"></span><br><span class="line"><span class="comment">// errors.New</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleReadAllError</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line">    _, err := ioutil.ReadAll(<span class="literal">nil</span>)</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// fmt.Errorf</span></span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exampleErrorf</span><span class="params">(arg <span class="keyword">int</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fmt.Errorf(<span class="string">"%d"</span>, arg)</span><br><span class="line">​</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>panic<br>在 golang 中遇到错误，需要强制退出程序，可以使用 panic 。panic 接收的参数是任意类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">panic</span><span class="params">(v <span class="keyword">interface</span>&#123;&#125;)</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="title">examplePanic</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">panic</span>(<span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">      examplePanic()</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="built_in">panic</span>: <span class="literal">nil</span></span><br><span class="line">​</span><br><span class="line">goroutine <span class="number">1</span> [running]:</span><br><span class="line">main.examplePanic()</span><br><span class="line">    C:/Users/wuxiaoshen/<span class="keyword">go</span>/src/<span class="keyword">go</span>-example-<span class="keyword">for</span>-live/five_learning/main.<span class="keyword">go</span>:<span class="number">28</span> +<span class="number">0x3a</span></span><br><span class="line">main.main()</span><br><span class="line">    C:/Users/wuxiaoshen/<span class="keyword">go</span>/src/<span class="keyword">go</span>-example-<span class="keyword">for</span>-live/five_learning/main.<span class="keyword">go</span>:<span class="number">37</span> +<span class="number">0x27</span></span><br><span class="line">上文中调用 examplePanic 函数会抛出异常，直接终止程序的执行。<span class="built_in">panic</span> 传入的参数是错误信息。比如上文 <span class="literal">nil</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>除非你确定需要终止程序运行，否则不太使用 panic</p>
<ol start="3">
<li>recover<br>recover 可以接收返回的异常信息，通常和 defer 一起使用。</li>
</ol>
<p>比如:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">examplePanic</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">panic</span>(<span class="string">"123"</span>)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">            fmt.Println(fmt.Sprintf(<span class="string">"recieve error: %s"</span>, err))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;()</span><br><span class="line">    examplePanic()</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">recieve error: <span class="number">123</span></span><br><span class="line">上文操作后，examplePanic 抛出的异常被 <span class="built_in">recover</span> 接收到，再进行了后面的处理。上文执行就没有错误提示。</span><br></pre></td></tr></table></figure></p>
<p>当多个 panic 抛出异常是， recover 接收第一个 panic 抛出的异常。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">examplePanic</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">panic</span>(<span class="string">"123"</span>)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">examplePanicOther</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">panic</span>(<span class="string">"1234"</span>)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">            fmt.Println(fmt.Sprintf(<span class="string">"recieve error: %v"</span>, err))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;()</span><br><span class="line">    examplePanic()</span><br><span class="line">    examplePanicOther()</span><br><span class="line">    examplePanic()</span><br><span class="line">​</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">recieve error: <span class="number">123</span></span><br></pre></td></tr></table></figure></p>
<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><p>接口是 golang 中最值得强调的特性。它让面向对象，内容组织实现非常的方便。</p>
<p>接口的定义</p>
<p>接口的使用：赋值、嵌入接口</p>
<p>内置常用接口</p>
<p>任意(Any)类型、类型判断</p>
<ol>
<li>接口的定义<br>接口在 go 语言中是一系列方法的集合，原则上方法可以有很多个，但建议4个左右。<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> HttpClient <span class="keyword">interface</span> &#123;</span><br><span class="line">    Get(<span class="keyword">string</span>) ([]<span class="keyword">byte</span>, error)</span><br><span class="line">    Post(<span class="keyword">string</span>, <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;) ([]<span class="keyword">byte</span>, error)</span><br><span class="line">    Put(<span class="keyword">string</span>, <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;) ([]<span class="keyword">byte</span>, error)</span><br><span class="line">    Delete(<span class="keyword">string</span>) (<span class="keyword">int</span>, error)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>type 和 interface 关键字组成 接口定义</p>
<p>接口是一系列方法的合集</p>
<p>方法参数和返回值只需指定类型，无需参数名称</p>
<p>只定义要干什么，而不关注实现</p>
<p>上文中定义了一个 httpClient 的接口，指定了这个接口可以干这些活：Get、Post、Put、Delete</p>
<ol start="2">
<li>接口的使用：赋值、嵌入接口</li>
</ol>
<p>上文中指定了 httpClient 接口，指定了这个接口需要干的活是：Get、Post、Put、Delete， 具体的实现需要靠其他结构体来实现。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> HttpImpl <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *HttpImpl)</span> <span class="title">Get</span><span class="params">(url <span class="keyword">string</span>)</span> <span class="params">([]<span class="keyword">byte</span>, error)</span></span> &#123;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">        resq *http.Response</span><br><span class="line">        err  error</span><br><span class="line">    )</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> resq, err = http.Get(url); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>, ErrorHttpNil</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">defer</span> resq.Body.Close()</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">        resp []<span class="keyword">byte</span></span><br><span class="line">    )</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> resp, err = ioutil.ReadAll(resq.Body); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>, ErrorByteNil</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">    <span class="keyword">return</span> resp, <span class="literal">nil</span></span><br><span class="line">​</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *HttpImpl)</span> <span class="title">Post</span><span class="params">(url <span class="keyword">string</span>, body <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">([]<span class="keyword">byte</span>, error)</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *HttpImpl)</span> <span class="title">Put</span><span class="params">(url <span class="keyword">string</span>, body <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">([]<span class="keyword">byte</span>, error)</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *HttpImpl)</span> <span class="title">Delete</span><span class="params">(url <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">int</span>, error)</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上文定义一个结构体 httpImpl， 这个结构体存在Get、Post、Put、Delete 四个方法，参数和返回值的类型和步骤一定义的接口的方法的参数和返回值一致。</p>
<p>上文定义的结构体 httpImpl 还可以有其他的方法，但不重要，重要的是存在接口中定义的那四个方法</p>
<p>那么我们就说这个结构体 httpImpl 实现了接口 HttpClient</p>
<p>一个结构体实现了接口要求的所有的方法(方法的参数和返回值一致)，那么就说这个结构体实现了这个接口</p>
<p>接口可以屏蔽内部细节，和具体的实现方法。只关注我需要做什么，而不关注怎么做。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> httpImpl = &amp;HttpImpl&#123;&#125; <span class="comment">// 结构体</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">var</span> httpClient HttpClient <span class="comment">// 接口</span></span><br><span class="line">​</span><br><span class="line">    httpClient = httpImpl <span class="comment">// 接口赋值</span></span><br><span class="line">​</span><br><span class="line">    responseOne, _ := httpClient.Get(<span class="string">"https://www.jianshu.com/u/58f0817209aa"</span>)</span><br><span class="line">    fmt.Println(<span class="keyword">string</span>([]<span class="keyword">byte</span>(responseOne)))</span><br><span class="line">​</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上文中的使用：httpClient 屏蔽了 httpImpl 的内部细节，而依然可以使用 Get 方法，去完成任务。</p>
<p>当然接口可以被诸多结构体实现，只需存在接口定义的几种方法即可。</p>
<p>接口和结构体的定义很相似，也可以完成嵌入接口的功能，嵌入的匿名的接口，可以自动的具备被嵌入的接口的方法。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> InterHttpClient <span class="keyword">interface</span> &#123;</span><br><span class="line">    HttpClient</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> httpImpl = &amp;HttpImpl&#123;&#125;</span><br><span class="line">    <span class="keyword">var</span> httpClient HttpClient</span><br><span class="line">    httpClient = httpImpl</span><br><span class="line">    responseOne, _ := httpClient.Get(<span class="string">"https://www.jianshu.com/u/58f0817209aa"</span>)</span><br><span class="line">    fmt.Println(<span class="keyword">string</span>([]<span class="keyword">byte</span>(responseOne)))</span><br><span class="line">​</span><br><span class="line">    <span class="comment">// interHttpClient</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">var</span> interHttpClient InterHttpClient</span><br><span class="line">    interHttpClient = httpImpl</span><br><span class="line">    responseTwo, _ := interHttpClient.Get(<span class="string">"http://www.gitbub.com"</span>)</span><br><span class="line">    fmt.Println(<span class="keyword">string</span>([]<span class="keyword">byte</span>(responseTwo)))</span><br><span class="line">​</span><br><span class="line">&#125;</span><br><span class="line"> InterHttpClient 嵌入接口 HttpClient , 而自动具备方法：Get、Post、Put、Delete</span><br></pre></td></tr></table></figure>
<p>同时 HttpImpl 结构体也实现了接口InterHttpClient</p>
<ol start="3">
<li>内置常用接口</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Stringer <span class="keyword">interface</span> &#123;</span><br><span class="line">    String() <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line">结构体实现 String 方法即可实现结构化输出结构体。</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> error <span class="keyword">interface</span> &#123;</span><br><span class="line">    Error() <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line">实现Error 方法即可自定义错误类型。</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">    Read(p []<span class="keyword">byte</span>) (n <span class="keyword">int</span>, err error)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Writer <span class="keyword">interface</span> &#123;</span><br><span class="line">    Write(p []<span class="keyword">byte</span>) (n <span class="keyword">int</span>, err error)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> ReadWriter <span class="keyword">interface</span> &#123;</span><br><span class="line">    Reader</span><br><span class="line">    Writer</span><br><span class="line">&#125;</span><br><span class="line">这几个读写接口在好些库中实现了，后续我们再讨论。</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>任意(Any)类型、类型断言<br>Any 类型</li>
</ol>
<p>interface{}<br>空接口在 go 里，可以当成任意类型，意味着，比如你的函数或者方法不知道传入的参数的类型，可以直接定义为 interface{}<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Say</span><span class="params">(name <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">    fmt.Println(name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>类型断言</p>
<p>类型断言的使用场景是：接口类型的变量可以包含任何类型的值。如何判断变量的真实类型？</p>
<p>比如解析一个不知道字段类型的 json， 常常需要使用到类型断言。</p>
<p>可以使用：</p>
<p>ok…idiom 模式进行类型判断</p>
<p>switch… case 推断匹配</p>
<p>ok…idiom</p>
<p>varInterface.(T), varInterface 必须是接口、T 则是具体的实现接口的结构体<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> httpImpl = &amp;HttpImpl&#123;&#125;</span><br><span class="line">    <span class="keyword">var</span> httpClient HttpClient</span><br><span class="line">    httpClient = httpImpl</span><br><span class="line">    responseOne, _ := httpClient.Get(<span class="string">"https://www.jianshu.com/u/58f0817209aa"</span>)</span><br><span class="line">    fmt.Println(<span class="keyword">string</span>([]<span class="keyword">byte</span>(responseOne)))</span><br><span class="line">​</span><br><span class="line">    <span class="comment">// interHttpClient</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">var</span> interHttpClient InterHttpClient</span><br><span class="line">    interHttpClient = httpImpl</span><br><span class="line">    responseTwo, _ := interHttpClient.Get(<span class="string">"http://www.gitbub.com"</span>)</span><br><span class="line">    fmt.Println(<span class="keyword">string</span>([]<span class="keyword">byte</span>(responseTwo)))</span><br><span class="line">​</span><br><span class="line">​</span><br><span class="line">    <span class="comment">// ok..idiom</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">if</span> n, ok := httpClient.(*HttpImpl); ok &#123;</span><br><span class="line">        fmt.Println(n)</span><br><span class="line">​</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> m, ok := interHttpClient.(*HttpImpl); ok &#123;</span><br><span class="line">        fmt.Println(m)</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">switch</span> ..<span class="keyword">case</span>...</span><br><span class="line"></span><br><span class="line">.(<span class="keyword">type</span>) 只在 <span class="keyword">switch</span> 语句里才能使用。</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Show</span><span class="params">(param <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> param.(<span class="keyword">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> *HttpImpl:</span><br><span class="line">        fmt.Println(<span class="string">"1"</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        fmt.Println(<span class="string">"0"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> httpImpl = &amp;HttpImpl&#123;&#125;</span><br><span class="line">    <span class="keyword">var</span> httpClient HttpClient</span><br><span class="line">    httpClient = httpImpl</span><br><span class="line">    responseOne, _ := httpClient.Get(<span class="string">"https://www.jianshu.com/u/58f0817209aa"</span>)</span><br><span class="line">    fmt.Println(<span class="keyword">string</span>([]<span class="keyword">byte</span>(responseOne)))</span><br><span class="line">​</span><br><span class="line">    <span class="comment">// interHttpClient</span></span><br><span class="line">​</span><br><span class="line">    <span class="keyword">var</span> interHttpClient InterHttpClient</span><br><span class="line">    interHttpClient = httpImpl</span><br><span class="line">    responseTwo, _ := interHttpClient.Get(<span class="string">"http://www.gitbub.com"</span>)</span><br><span class="line">    fmt.Println(<span class="keyword">string</span>([]<span class="keyword">byte</span>(responseTwo)))</span><br><span class="line">​</span><br><span class="line">    Show(httpClient) <span class="comment">// 1</span></span><br><span class="line">    Show(interHttpClient) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></p>
<p>以上就是接口的全部内容，接口是go 中最特别的特性。借助 接口， go 实现面向对象中的继承和多态。</p>
<p>接口是方法的集合，只定义具体要干什么，而怎么干，则由其他的结构体的方法实现。这样不同的结构体的方法的具体处理不同，实现的接口的功能就不一样。</p>
<p>尽管如此，接口并不意味着可以随意滥用。我们最好是根据面向对象的客观实体，抽象出接口和方法。</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/">Etiqueta</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#概述"><span class="toc-number">1.</span> <span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#语言特性"><span class="toc-number">1.1.</span> <span class="toc-text">语言特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#环境变量"><span class="toc-number">1.2.</span> <span class="toc-text">环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#源码文件"><span class="toc-number">1.3.</span> <span class="toc-text">源码文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码包"><span class="toc-number">1.4.</span> <span class="toc-text">代码包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#依赖包管理"><span class="toc-number">1.5.</span> <span class="toc-text">依赖包管理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#程序结构要素"><span class="toc-number">2.</span> <span class="toc-text">程序结构要素</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#变量"><span class="toc-number">2.1.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常量"><span class="toc-number">2.2.</span> <span class="toc-text">常量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#作用域"><span class="toc-number">2.3.</span> <span class="toc-text">作用域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据类型"><span class="toc-number">2.4.</span> <span class="toc-text">数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#字符串"><span class="toc-number">2.4.1.</span> <span class="toc-text">字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数组"><span class="toc-number">2.4.2.</span> <span class="toc-text">数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Slice"><span class="toc-number">2.4.3.</span> <span class="toc-text">Slice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Map"><span class="toc-number">2.4.4.</span> <span class="toc-text">Map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Strcut"><span class="toc-number">2.4.5.</span> <span class="toc-text">Strcut</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#指针"><span class="toc-number">2.4.6.</span> <span class="toc-text">指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#算术运算符："><span class="toc-number">2.4.7.</span> <span class="toc-text">算术运算符：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#控制语句"><span class="toc-number">2.4.8.</span> <span class="toc-text">控制语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数"><span class="toc-number">2.4.9.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#错误处理"><span class="toc-number">2.4.10.</span> <span class="toc-text">错误处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#接口"><span class="toc-number">2.4.11.</span> <span class="toc-text">接口</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&text=Golang 学习笔记"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&title=Golang 学习笔记"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&is_video=false&description=Golang 学习笔记"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Golang 学习笔记&body=Check out this article: https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&title=Golang 学习笔记"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&title=Golang 学习笔记"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&title=Golang 学习笔记"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&title=Golang 学习笔记"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&name=Golang 学习笔记&description=&lt;blockquote&gt;
&lt;p&gt;Go 入门&lt;br&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://bianwangui.github.io/2018/05/06/2018/Go 学习笔记/&t=Golang 学习笔记"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2020
    万 少 侠
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/">Etiqueta</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
